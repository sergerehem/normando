import com.google.appengine.api.datastore.Entity
import static util.Clock.*

def pId = user.email+":"+getDate()

def p = datastore.execute {
	select single from "ponto"
	where email == user.email
	and data == getDate()
}
if (p!=null) {
	println "####achei" 
} else { 
	println "*****nao achei"
}
if (user == null) {
	redirect "/intranet/login"
} else {
	def pontoId = user.email+":"+getDate()
	def pontoDia = datastore.execute {
		select single from "ponto"
		where id == pontoId
	}
	def pontoMes = datastore.execute {
		select all from "ponto"
		where email == user.email
		and mes == getMonth()
	}
println "$pontoId zz $pontoMes xx $pontoDia"
}	

	forward "/WEB-INF/pages/ponto.gtpl"
//println pd + getDate() + pm
